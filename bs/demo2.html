<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>demo2</title>
    <style>
        .figure {
            height: 700px;
            width: 700px;
            background: white;
        }

        #fig1 {
            height: 320px;
            width: 100%;
        }

        #fig2 {
            height: 320px;
            width: 100%;
        }
    </style>
    <script src="static/js/jquery-1.4.4.min.js"></script>
    <script src="static/js/echarts.min.js"></script>
    <script src="static/layui/layui.js"></script>
    <script src="static/js/my.js?ver=1.0"></script>
    <script>
        // 子页面代码,这里注意child一定要是全局函数
        function child(data, params) {
            console.log(data['farm_name']);
            if (fig1.dispose) {
                fig1.dispose();
            }
            fig1 = echarts.init(document.getElementById('fig1'), 'white', {renderer: 'canvas'});
            if (fig2.dispose) {
                fig2.dispose();
            }
            fig2 = echarts.init(document.getElementById('fig2'), 'white', {renderer: 'canvas'});
            $.ajax({
                url: "/tf",
                type: "POST",
                data: data,
                dataType: "json",
                beforeSend: function () {
                    loading();
                },
                complete: function () {
                    setTimeout(function () {
                        layer.closeAll('loading');
                    }, 0);
                },
                success: function (data) {
                    let option_ts = {};
                    setOption_tfe(fig1, option_ts, '时域图', 'time_series', data, [params.seriesName]);
                    // 增加自定义参数而不覆盖原本的默认参数
                    fig1.on('click', (params) => {
                        addmarkPoint (params, fig1);
                    });
                    fig1.on('contextmenu', (params) => { deletemarkPoint (params, fig1) });
                    let option_freq = {};
                    setOption_tfe(fig2, option_freq, '频域图', 'freq', data, [params.seriesName]);
                    // 增加自定义参数而不覆盖原本的默认参数
                    fig2.on('click', (params) => {
                        addmarkPoint (params, fig2);
                    });
                    fig2.on('contextmenu', (params) => { deletemarkPoint (params, fig2) });
                }
            });
        }
    </script>
</head>
<body>
<div class="figure">
    <div id="fig1"></div>
    <div id="fig2"></div>
</div>
</body>
</html>